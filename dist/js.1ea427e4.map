{"version":3,"sources":["js/rem.js","node_modules/better-scroll/dist/bscroll.esm.js","js/index.js","../../../../../../../../usr/local/share/.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../../../../usr/local/share/.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["win","resize","domWidth","domEle","getBoundingClientRect","width","rem","style","fontSize","v","initial_scale","timeCode","dom","document","documentElement","viewport","querySelector","flexible","o","getAttribute","match","parseFloat","parseInt","toFixed","n","navigator","appVersion","devicePixelRatio","setAttribute","createElement","firstElementChild","appendChild","m","write","innerHTML","dpr","addEventListener","clearTimeout","setTimeout","b","persisted","window","slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","toConsumableArray","arr2","from","eventMixin","BScroll","prototype","on","type","fn","context","arguments","_events","once","magic","off","apply","count","trigger","events","len","eventsCopy","concat","event","_event","slice","call","inBrowser","ua","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","getNow","performance","now","timing","navigationStart","Date","extend","target","_len","rest","_key","source","key","isUndef","getDistance","x","y","Math","sqrt","elementStyle","vendor","transformNames","webkit","Moz","O","ms","standard","prefixStyle","charAt","toUpperCase","substr","addEvent","el","capture","passive","removeEvent","removeEventListener","offset","left","top","offsetLeft","offsetTop","offsetParent","offsetToBody","rect","pageXOffset","pageYOffset","transform","hasPerspective","hasTouch","hasTransform","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","TOUCH_EVENT","MOUSE_EVENT","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","getRect","SVGElement","height","offsetWidth","offsetHeight","preventDefaultException","exceptions","tap","e","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","cancelable","MouseEvent","forwardedTouchEvent","_constructed","dblclick","prepend","firstChild","before","parentNode","insertBefore","removeChild","child","DEFAULT_OPTIONS","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","bounce","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","preventDefault","tagName","HWCompositing","useTransition","useTransform","bindToWrapper","disableMouse","disableTouch","observeDOM","autoBlur","wheel","snap","scrollbar","pullDownRefresh","pullUpLoad","mouseWheel","stopPropagation","zoom","infinity","initMixin","_init","options","_handleOptions","directionX","directionY","setScale","_addDOMEvents","_initExtFeatures","_watchTransition","_initDOMObserver","_handleAutoBlur","refresh","scrollTo","enable","scale","lastScale","translateZ","eventOperation","_handleDOMEvents","_removeDOMEvents","wrapper","scroller","_initSnap","_initScrollbar","_initPullUp","_initPullDown","_initWheel","_initMouseWheel","_initZoom","_initInfinite","defineProperty","me","isInTransition","get","set","newVal","children","pointerEvents","pulling","activeElement","blur","_this","MutationObserver","timer","observer","mutations","_shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","config","attributes","childList","subtree","observe","disconnect","_checkDOMUpdate","outsideBoundaries","minScrollX","maxScrollX","minScrollY","maxScrollY","stopFromTransition","scrollerRect","oldWidth","oldHeight","check","destroyed","newWidth","newHeight","_this2","handleEvent","_start","touches","_zoomStart","_zoom","_move","scaled","_zoomEnd","_end","_resize","_transitionEnd","enabled","_onMouseWheel","isWrapperStatic","getComputedStyle","position","wrapperRect","wrapperWidth","wrapperHeight","scrollerWidth","round","scrollerHeight","relativeX","relativeY","items","itemHeight","selectedIndex","hasHorizontalScroll","hasVerticalScroll","endTime","wrapperOffset","resetPosition","disable","ease","swipe","t","swipeBounce","current","start","time","lowerMargin","upperMargin","wrapperSize","distance","speed","abs","duration","rate","destination","max","min","DEFAULT_INTERVAL","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_RIGHT","PROBE_DEBOUNCE","PROBE_REALTIME","warn","msg","console","error","assert","condition","Error","coreMixin","_eventType","button","initiated","moved","distX","distY","movingDirectionX","movingDirectionY","directionLocked","_transitionTime","startTime","stop","point","absStartX","absStartY","pointX","pointY","deltaX","deltaY","absDistX","absDistY","timestamp","newX","newY","bottom","right","_translate","scrollLeft","body","scrollTop","pX","pY","clientWidth","clientHeight","_checkPullDown","_checkClick","flick","momentumX","momentumY","adjustTime","easing","_nearestSnap","currentPage","snapSpeed","preventClick","className","wheelWrapperClass","index","_offset","scrollToElement","_dblclick","dblclickTrigged","lastClickTime","_dblclick$delay","delay","resizeTimeout","_startProbe","probeTimer","probe","pos","getComputedPosition","scrollerStyle","indicators","transitionTime","_transitionTimingFunction","_i2","needReset","_options$wheel$rotate","rotate","deg","_i3","updatePosition","_animate","destX","destY","easingFn","startScale","destScale","destTime","step","isAnimating","newScale","animateTimer","scrollBy","_reflow","offsetX","offsetY","nodeType","wheelItemClass","easeing","roundX","roundY","matrix","split","replace","destroy","snapMixin","loop","cloneNode","querySelectorAll","pages","stepX","stepY","cx","cy","l","_checkSnapLoop","initPageX","_loopX","initPageY","_loopY","_goToPage","snapThreshold","threshold","snapThresholdX","snapThresholdY","listenFlick","_children","posX","posY","goToPage","prev","getCurrentPage","wheelMixin","wheelTo","getSelectedIndex","INDICATOR_MIN_LEN","scrollbarMixin","_options$scrollbar","_options$scrollbar$fa","fade","_options$scrollbar$in","interactive","indicator","createScrollbar","direction","_insertScrollBar","Indicator","_removeScrollBars","cssText","wrapperStyle","indicatorStyle","visible","opacity","sizeRatioX","sizeRatioY","maxPosX","maxPosY","_shouldShow","_calculate","hold","fadeTimeout","indicatorHeight","_height","indicatorWidth","_width","lastPointX","lastPointY","_handleMoveEvents","_pos","snapOption","_snapOption$easing","display","pullDownMixin","_options$pullDownRefr","_options$pullDownRefr2","_options$pullDownRefr3","finishPullDown","openPullDown","closePullDown","pullUpMixin","pullupWatching","_watchPullUp","_checkToEnd","_options$pullUpLoad$t","finishPullUp","openPullUp","closePullUp","mouseWheelMixin","_handleMouseWheelEvent","mouseWheelTimer","firstWheelOpreation","_options$mouseWheel","_options$mouseWheel$s","_options$mouseWheel$i","invert","_options$mouseWheel$e","easeTime","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","zoomMixin","_options$zoom","_options$zoom$start","_options$zoom$min","_options$zoom$max","_zoomTo","originX","originY","zoomTo","_offsetToBody","firstFinger","secondFinger","startDistance","_offsetToBody2","_options$zoom2","_options$zoom2$min","_options$zoom2$max","pow","_options$zoom3","_options$zoom3$min","_options$zoom3$max","RUNWAY_ITEMS","RUNWAY_ITEMS_OPPOSITE","ANIMATION_DURATION_MS","DEFAULT_SCROLL_RUNWAY","infiniteMixin","infiniteScroller","InfiniteScroller","isTombstoneNode","node","classList","contains","createTombstone","fetch","render","firstAttachedItem","lastAttachedItem","anchorScrollTop","anchorItem","tombstoneHeight","tombstoneWidth","tombstones","loadedItems","requestInProgress","hasMore","wrapperEl","scrollerEl","onScroll","onResize","delta","_calculateAnchoredItem","lastScreenItem","end","fill","maybeRequestContent","tombstone","attachContent","itemsNeeded","then","addContent","tombstoneLen","_removeTombstones","curPos","_fixScrollPosition","_setupAnimations","_addItem","data","unusedNodes","_collectUnusedNodes","tombstoneAnimations","_createDOMNodes","_cleanupUnusedNodes","_cacheNodeSize","markIndex","itemLen","currentNode","currentData","splice","zIndex","pop","_getTombStone","_this3","animation","transition","_animation","tombstoneNode","_animation2","initialAnchor","ceil","floor","Version","log","bundleURL","getBundleURLCached","getBundleURL","matches","stack","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","onload","remove","href","nextSibling","cssTimeout","reloadCSS","links","module"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9uGf;;AACA;;AACA;;AACA;;;;AACA;;;;AAGA4T,QAAQkS,GAAR","file":"js.1ea427e4.map","sourceRoot":"..","sourcesContent":["!function(win) {\r\n function resize() {\r\n  var domWidth = domEle.getBoundingClientRect().width;\r\n  win.rem = domWidth / 25;\r\n  domEle.style.fontSize = win.rem + \"px\";\r\n }\r\n var v, initial_scale, timeCode, dom = win.document, domEle = dom.documentElement, viewport = dom.querySelector('meta[name=\"viewport\"]'), flexible = dom.querySelector('meta[name=\"flexible\"]');\r\n if (viewport) {\r\n  //viewport<meta name=\"viewport\"content=\"initial-scale=0.5, minimum-scale=0.5, maximum-scale=0.5,user-scalable=no,minimal-ui\"/>\r\n  var o = viewport.getAttribute(\"content\").match(/initial\\-scale=([\"']?)([\\d\\.]+)\\1?/);\r\n  if(o){\r\n   initial_scale = parseFloat(o[2]);\r\n   v = parseInt(1 / initial_scale);\r\n  }\r\n } else {\r\n  if (flexible) {\r\n   var o = flexible.getAttribute(\"content\").match(/initial\\-dpr=([\"']?)([\\d\\.]+)\\1?/);\r\n   if(o){\r\n    v = parseFloat(o[2]);\r\n    initial_scale = parseFloat((1 / v).toFixed(2))\r\n   }\r\n  }\r\n }\r\n if (!v && !initial_scale) {\r\n  var n = (win.navigator.appVersion.match(/android/gi), win.navigator.appVersion.match(/iphone/gi));\r\n  v = win.devicePixelRatio;\r\n  v = n ? v >= 3 ? 3 : v >= 2 ? 2 : 1 : 1, initial_scale = 1 / v\r\n }\r\n //viewport\r\n if (domEle.setAttribute(\"data-dpr\", v), !viewport) {\r\n  if (viewport = dom.createElement(\"meta\"), viewport.setAttribute(\"name\", \"viewport\"), viewport.setAttribute(\"content\", \"initial-scale=\" + initial_scale + \", maximum-scale=\" + initial_scale + \", minimum-scale=\" + initial_scale + \", user-scalable=no\"), domEle.firstElementChild) {\r\n   domEle.firstElementChild.appendChild(viewport)\r\n  } else {\r\n   var m = dom.createElement(\"div\");\r\n   m.appendChild(viewport), dom.write(m.innerHTML)\r\n  }\r\n }\r\n win.dpr = v;\r\n win.addEventListener(\"resize\", function() {\r\n  clearTimeout(timeCode), timeCode = setTimeout(resize, 300)\r\n }, false);\r\n win.addEventListener(\"pageshow\", function(b) {\r\n  b.persisted && (clearTimeout(timeCode), timeCode = setTimeout(resize, 300))\r\n }, false);\r\n /* body12\r\n \"complete\" === dom.readyState ? dom.body.style.fontSize = 12 * v + \"px\" : dom.addEventListener(\"DOMContentLoaded\", function() {\r\n  //dom.body.style.fontSize = 12 * v + \"px\"\r\n }, false);\r\n */\r\n resize();\r\n}(window);","/*!\n * better-normal-scroll v1.12.4\n * (c) 2016-2018 ustbhuangyi\n * Released under the MIT License.\n */\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nfunction eventMixin(BScroll) {\n  BScroll.prototype.on = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    if (!this._events[type]) {\n      this._events[type] = [];\n    }\n\n    this._events[type].push([fn, context]);\n  };\n\n  BScroll.prototype.once = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    function magic() {\n      this.off(type, magic);\n\n      fn.apply(context, arguments);\n    }\n    // To expose the corresponding function method in order to execute the off method\n    magic.fn = fn;\n\n    this.on(type, magic);\n  };\n\n  BScroll.prototype.off = function (type, fn) {\n    var _events = this._events[type];\n    if (!_events) {\n      return;\n    }\n\n    var count = _events.length;\n    while (count--) {\n      if (_events[count][0] === fn || _events[count][0] && _events[count][0].fn === fn) {\n        _events[count][0] = undefined;\n      }\n    }\n  };\n\n  BScroll.prototype.trigger = function (type) {\n    var events = this._events[type];\n    if (!events) {\n      return;\n    }\n\n    var len = events.length;\n    var eventsCopy = [].concat(toConsumableArray(events));\n    for (var i = 0; i < len; i++) {\n      var event = eventsCopy[i];\n\n      var _event = slicedToArray(event, 2),\n          fn = _event[0],\n          context = _event[1];\n\n      if (fn) {\n        fn.apply(context, [].slice.call(arguments, 1));\n      }\n    }\n  };\n}\n\n// ssr support\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\n  return window.performance && window.performance.now ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\n\nfunction extend(target) {\n  for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < rest.length; i++) {\n    var source = rest[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\n\nfunction getDistance(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nvar elementStyle = inBrowser && document.createElement('div').style;\n\nvar vendor = function () {\n  if (!inBrowser) {\n    return false;\n  }\n  var transformNames = {\n    webkit: 'webkitTransform',\n    Moz: 'MozTransform',\n    O: 'OTransform',\n    ms: 'msTransform',\n    standard: 'transform'\n  };\n\n  for (var key in transformNames) {\n    if (elementStyle[transformNames[key]] !== undefined) {\n      return key;\n    }\n  }\n\n  return false;\n}();\n\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return false;\n  }\n\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n    return style;\n  }\n\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\n\nfunction addEvent(el, type, fn, capture) {\n  el.addEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\n\nfunction offsetToBody(el) {\n  var rect = el.getBoundingClientRect();\n\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  };\n}\n\nvar transform = prefixStyle('transform');\n\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\n// fix issue #361\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransform = transform !== false;\nvar hasTransition = inBrowser && prefixStyle('transition') in elementStyle;\n\nvar style = {\n  transform: transform,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd')\n};\n\nvar TOUCH_EVENT = 1;\nvar MOUSE_EVENT = 2;\n\nvar eventType = {\n  touchstart: TOUCH_EVENT,\n  touchmove: TOUCH_EVENT,\n  touchend: TOUCH_EVENT,\n\n  mousedown: MOUSE_EVENT,\n  mousemove: MOUSE_EVENT,\n  mouseup: MOUSE_EVENT\n};\n\nfunction getRect(el) {\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\n\nfunction preventDefaultException(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\n\nfunction click(e) {\n  var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'click';\n\n  var eventSource = void 0;\n  if (e.type === 'mouseup' || e.type === 'mousecancel') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n  var posSrc = {};\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n  var ev = void 0;\n  var bubbles = true;\n  var cancelable = true;\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, posSrc));\n    } catch (e) {\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  }\n\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\n\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\n\nfunction prepend(el, target) {\n  if (target.firstChild) {\n    before(el, target.firstChild);\n  } else {\n    target.appendChild(el);\n  }\n}\n\nfunction before(el, target) {\n  target.parentNode.insertBefore(el, target);\n}\n\nfunction removeChild(el, child) {\n  el.removeChild(child);\n}\n\nvar DEFAULT_OPTIONS = {\n  startX: 0,\n  startY: 0,\n  scrollX: false,\n  scrollY: true,\n  freeScroll: false,\n  directionLockThreshold: 5,\n  eventPassthrough: '',\n  click: false,\n  tap: false,\n  /**\n   * support any side\n   * bounce: {\n   *   top: true,\n   *   bottom: true,\n   *   left: true,\n   *   right: true\n   * }\n   */\n  bounce: true,\n  bounceTime: 800,\n  momentum: true,\n  momentumLimitTime: 300,\n  momentumLimitDistance: 15,\n  swipeTime: 2500,\n  swipeBounceTime: 500,\n  deceleration: 0.0015,\n  flickLimitTime: 200,\n  flickLimitDistance: 100,\n  resizePolling: 60,\n  probeType: 0,\n  preventDefault: true,\n  preventDefaultException: {\n    tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/\n  },\n  HWCompositing: true,\n  useTransition: true,\n  useTransform: true,\n  bindToWrapper: false,\n  disableMouse: hasTouch,\n  disableTouch: !hasTouch,\n  observeDOM: true,\n  autoBlur: true,\n  /**\n   * for picker\n   * wheel: {\n   *   selectedIndex: 0,\n   *   rotate: 25,\n   *   adjustTime: 400\n   *   wheelWrapperClass: 'wheel-scroll',\n   *   wheelItemClass: 'wheel-item'\n   * }\n   */\n  wheel: false,\n  /**\n   * for slide\n   * snap: {\n   *   loop: false,\n   *   el: domEl,\n   *   threshold: 0.1,\n   *   stepX: 100,\n   *   stepY: 100,\n   *   speed: 400,\n   *   easing: {\n   *     style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n   *     fn: function (t) {\n   *       return t * (2 - t)\n   *     }\n   *   }\n   *   listenFlick: true\n   * }\n   */\n  snap: false,\n  /**\n   * for scrollbar\n   * scrollbar: {\n   *   fade: true,\n   *   interactive: false\n   * }\n   */\n  scrollbar: false,\n  /**\n   * for pull down and refresh\n   * pullDownRefresh: {\n   *   threshold: 50,\n   *   stop: 20\n   * }\n   */\n  pullDownRefresh: false,\n  /**\n   * for pull up and load\n   * pullUpLoad: {\n   *   threshold: 50\n   * }\n   */\n  pullUpLoad: false,\n  /**\n   * for mouse wheel\n   * mouseWheel: {\n   *   speed: 20,\n   *   invert: false,\n   *   easeTime: 300\n   * }\n   */\n  mouseWheel: false,\n  stopPropagation: false,\n  /**\n   * for zoom\n   * zoom: {\n   *   start: 1,\n   *   min: 1,\n   *   max: 4\n   * }\n   */\n  zoom: false,\n  /**\n   * for infinity\n   * infinity: {\n   *   render(item, div) {\n   *   },\n   *   createTombstone() {\n   *   },\n   *   fetch(count) {\n   *   }\n   * }\n   */\n  infinity: false,\n  /**\n   * for double click\n   * dblclick: {\n   *   delay: 300\n   * }\n   */\n  dblclick: false\n};\n\nfunction initMixin(BScroll) {\n  BScroll.prototype._init = function (el, options) {\n    this._handleOptions(options);\n\n    // init private custom events\n    this._events = {};\n\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n\n    this.setScale(1);\n\n    this._addDOMEvents();\n\n    this._initExtFeatures();\n\n    this._watchTransition();\n\n    if (this.options.observeDOM) {\n      this._initDOMObserver();\n    }\n\n    if (this.options.autoBlur) {\n      this._handleAutoBlur();\n    }\n\n    this.refresh();\n\n    if (!this.options.snap) {\n      this.scrollTo(this.options.startX, this.options.startY);\n    }\n\n    this.enable();\n  };\n\n  BScroll.prototype.setScale = function (scale) {\n    this.lastScale = isUndef(this.scale) ? scale : this.scale;\n    this.scale = scale;\n  };\n\n  BScroll.prototype._handleOptions = function (options) {\n    this.options = extend({}, DEFAULT_OPTIONS, options);\n\n    this.translateZ = this.options.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\n\n    this.options.useTransition = this.options.useTransition && hasTransition;\n    this.options.useTransform = this.options.useTransform && hasTransform;\n\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.options.scrollX = this.options.eventPassthrough === 'horizontal' ? false : this.options.scrollX;\n    this.options.scrollY = this.options.eventPassthrough === 'vertical' ? false : this.options.scrollY;\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    if (this.options.tap === true) {\n      this.options.tap = 'tap';\n    }\n  };\n\n  BScroll.prototype._addDOMEvents = function () {\n    var eventOperation = addEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._removeDOMEvents = function () {\n    var eventOperation = removeEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._handleDOMEvents = function (eventOperation) {\n    var target = this.options.bindToWrapper ? this.wrapper : window;\n    eventOperation(window, 'orientationchange', this);\n    eventOperation(window, 'resize', this);\n\n    if (this.options.click) {\n      eventOperation(this.wrapper, 'click', this, true);\n    }\n\n    if (!this.options.disableMouse) {\n      eventOperation(this.wrapper, 'mousedown', this);\n      eventOperation(target, 'mousemove', this);\n      eventOperation(target, 'mousecancel', this);\n      eventOperation(target, 'mouseup', this);\n    }\n\n    if (hasTouch && !this.options.disableTouch) {\n      eventOperation(this.wrapper, 'touchstart', this);\n      eventOperation(target, 'touchmove', this);\n      eventOperation(target, 'touchcancel', this);\n      eventOperation(target, 'touchend', this);\n    }\n\n    eventOperation(this.scroller, style.transitionEnd, this);\n  };\n\n  BScroll.prototype._initExtFeatures = function () {\n    if (this.options.snap) {\n      this._initSnap();\n    }\n    if (this.options.scrollbar) {\n      this._initScrollbar();\n    }\n    if (this.options.pullUpLoad) {\n      this._initPullUp();\n    }\n    if (this.options.pullDownRefresh) {\n      this._initPullDown();\n    }\n    if (this.options.wheel) {\n      this._initWheel();\n    }\n    if (this.options.mouseWheel) {\n      this._initMouseWheel();\n    }\n    if (this.options.zoom) {\n      this._initZoom();\n    }\n    if (this.options.infinity) {\n      this._initInfinite();\n    }\n  };\n\n  BScroll.prototype._watchTransition = function () {\n    if (typeof Object.defineProperty !== 'function') {\n      return;\n    }\n    var me = this;\n    var isInTransition = false;\n    var key = this.useTransition ? 'isInTransition' : 'isAnimating';\n    Object.defineProperty(this, key, {\n      get: function get() {\n        return isInTransition;\n      },\n      set: function set(newVal) {\n        isInTransition = newVal;\n        // fix issue #359\n        var el = me.scroller.children.length ? me.scroller.children : [me.scroller];\n        var pointerEvents = isInTransition && !me.pulling ? 'none' : 'auto';\n        for (var i = 0; i < el.length; i++) {\n          el[i].style.pointerEvents = pointerEvents;\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._handleAutoBlur = function () {\n    this.on('scrollStart', function () {\n      var activeElement = document.activeElement;\n      if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n        activeElement.blur();\n      }\n    });\n  };\n\n  BScroll.prototype._initDOMObserver = function () {\n    var _this = this;\n\n    if (typeof MutationObserver !== 'undefined') {\n      var timer = void 0;\n      var observer = new MutationObserver(function (mutations) {\n        // don't do any refresh during the transition, or outside of the boundaries\n        if (_this._shouldNotRefresh()) {\n          return;\n        }\n        var immediateRefresh = false;\n        var deferredRefresh = false;\n        for (var i = 0; i < mutations.length; i++) {\n          var mutation = mutations[i];\n          if (mutation.type !== 'attributes') {\n            immediateRefresh = true;\n            break;\n          } else {\n            if (mutation.target !== _this.scroller) {\n              deferredRefresh = true;\n              break;\n            }\n          }\n        }\n        if (immediateRefresh) {\n          _this.refresh();\n        } else if (deferredRefresh) {\n          // attributes changes too often\n          clearTimeout(timer);\n          timer = setTimeout(function () {\n            if (!_this._shouldNotRefresh()) {\n              _this.refresh();\n            }\n          }, 60);\n        }\n      });\n      var config = {\n        attributes: true,\n        childList: true,\n        subtree: true\n      };\n      observer.observe(this.scroller, config);\n\n      this.on('destroy', function () {\n        observer.disconnect();\n      });\n    } else {\n      this._checkDOMUpdate();\n    }\n  };\n\n  BScroll.prototype._shouldNotRefresh = function () {\n    var outsideBoundaries = this.x > this.minScrollX || this.x < this.maxScrollX || this.y > this.minScrollY || this.y < this.maxScrollY;\n\n    return this.isInTransition || this.stopFromTransition || outsideBoundaries;\n  };\n\n  BScroll.prototype._checkDOMUpdate = function () {\n    var scrollerRect = getRect(this.scroller);\n    var oldWidth = scrollerRect.width;\n    var oldHeight = scrollerRect.height;\n\n    function check() {\n      if (this.destroyed) {\n        return;\n      }\n      scrollerRect = getRect(this.scroller);\n      var newWidth = scrollerRect.width;\n      var newHeight = scrollerRect.height;\n\n      if (oldWidth !== newWidth || oldHeight !== newHeight) {\n        this.refresh();\n      }\n      oldWidth = newWidth;\n      oldHeight = newHeight;\n\n      next.call(this);\n    }\n\n    function next() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        check.call(_this2);\n      }, 1000);\n    }\n\n    next.call(this);\n  };\n\n  BScroll.prototype.handleEvent = function (e) {\n    switch (e.type) {\n      case 'touchstart':\n      case 'mousedown':\n        this._start(e);\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoomStart(e);\n        }\n        break;\n      case 'touchmove':\n      case 'mousemove':\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoom(e);\n        } else {\n          this._move(e);\n        }\n        break;\n      case 'touchend':\n      case 'mouseup':\n      case 'touchcancel':\n      case 'mousecancel':\n        if (this.scaled) {\n          this._zoomEnd(e);\n        } else {\n          this._end(e);\n        }\n        break;\n      case 'orientationchange':\n      case 'resize':\n        this._resize();\n        break;\n      case 'transitionend':\n      case 'webkitTransitionEnd':\n      case 'oTransitionEnd':\n      case 'MSTransitionEnd':\n        this._transitionEnd(e);\n        break;\n      case 'click':\n        if (this.enabled && !e._constructed) {\n          if (!preventDefaultException(e.target, this.options.preventDefaultException)) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        }\n        break;\n      case 'wheel':\n      case 'DOMMouseScroll':\n      case 'mousewheel':\n        this._onMouseWheel(e);\n        break;\n    }\n  };\n\n  BScroll.prototype.refresh = function () {\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    var wrapperRect = getRect(this.wrapper);\n    this.wrapperWidth = wrapperRect.width;\n    this.wrapperHeight = wrapperRect.height;\n\n    var scrollerRect = getRect(this.scroller);\n    this.scrollerWidth = Math.round(scrollerRect.width * this.scale);\n    this.scrollerHeight = Math.round(scrollerRect.height * this.scale);\n\n    this.relativeX = scrollerRect.left;\n    this.relativeY = scrollerRect.top;\n\n    if (isWrapperStatic) {\n      this.relativeX -= wrapperRect.left;\n      this.relativeY -= wrapperRect.top;\n    }\n\n    this.minScrollX = 0;\n    this.minScrollY = 0;\n\n    var wheel = this.options.wheel;\n    if (wheel) {\n      this.items = this.scroller.children;\n      this.options.itemHeight = this.itemHeight = this.items.length ? this.scrollerHeight / this.items.length : 0;\n      if (this.selectedIndex === undefined) {\n        this.selectedIndex = wheel.selectedIndex || 0;\n      }\n      this.options.startY = -this.selectedIndex * this.itemHeight;\n      this.maxScrollX = 0;\n      this.maxScrollY = -this.itemHeight * (this.items.length - 1);\n    } else {\n      this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\n      if (!this.options.infinity) {\n        this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\n      }\n      if (this.maxScrollX < 0) {\n        this.maxScrollX -= this.relativeX;\n        this.minScrollX = -this.relativeX;\n      } else if (this.scale > 1) {\n        this.maxScrollX = this.maxScrollX / 2 - this.relativeX;\n        this.minScrollX = this.maxScrollX;\n      }\n      if (this.maxScrollY < 0) {\n        this.maxScrollY -= this.relativeY;\n        this.minScrollY = -this.relativeY;\n      } else if (this.scale > 1) {\n        this.maxScrollY = this.maxScrollY / 2 - this.relativeY;\n        this.minScrollY = this.maxScrollY;\n      }\n    }\n\n    this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < this.minScrollX;\n    this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < this.minScrollY;\n\n    if (!this.hasHorizontalScroll) {\n      this.maxScrollX = this.minScrollX;\n      this.scrollerWidth = this.wrapperWidth;\n    }\n\n    if (!this.hasVerticalScroll) {\n      this.maxScrollY = this.minScrollY;\n      this.scrollerHeight = this.wrapperHeight;\n    }\n\n    this.endTime = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.wrapperOffset = offset(this.wrapper);\n\n    this.trigger('refresh');\n\n    !this.scaled && this.resetPosition();\n  };\n\n  BScroll.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  BScroll.prototype.disable = function () {\n    this.enabled = false;\n  };\n}\n\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\n\nfunction momentum(current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\n  var distance = current - start;\n  var speed = Math.abs(distance) / time;\n\n  var deceleration = options.deceleration,\n      itemHeight = options.itemHeight,\n      swipeBounceTime = options.swipeBounceTime,\n      wheel = options.wheel,\n      swipeTime = options.swipeTime;\n\n  var duration = swipeTime;\n  var rate = wheel ? 4 : 15;\n\n  var destination = current + speed / deceleration * (distance < 0 ? -1 : 1);\n\n  if (wheel && itemHeight) {\n    destination = Math.round(destination / itemHeight) * itemHeight;\n  }\n\n  if (destination < lowerMargin) {\n    destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / rate * speed) : lowerMargin;\n    duration = swipeBounceTime;\n  } else if (destination > upperMargin) {\n    destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / rate * speed) : upperMargin;\n    duration = swipeBounceTime;\n  }\n\n  return {\n    destination: Math.round(destination),\n    duration: duration\n  };\n}\n\nvar DEFAULT_INTERVAL = 100 / 60;\n\nfunction noop() {}\n\nvar requestAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame ||\n  // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\n  };\n}();\n\nvar cancelAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\nvar DIRECTION_UP = 1;\nvar DIRECTION_DOWN = -1;\nvar DIRECTION_LEFT = 1;\nvar DIRECTION_RIGHT = -1;\n\nvar PROBE_DEBOUNCE = 1;\n\nvar PROBE_REALTIME = 3;\n\nfunction warn(msg) {\n  console.error('[BScroll warn]: ' + msg);\n}\n\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg);\n  }\n}\n\nfunction coreMixin(BScroll) {\n  BScroll.prototype._start = function (e) {\n    var _eventType = eventType[e.type];\n    if (_eventType !== TOUCH_EVENT) {\n      if (e.button !== 0) {\n        return;\n      }\n    }\n    if (!this.enabled || this.destroyed || this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n    this.initiated = _eventType;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.moved = false;\n    this.distX = 0;\n    this.distY = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.movingDirectionX = 0;\n    this.movingDirectionY = 0;\n    this.directionLocked = 0;\n\n    this._transitionTime();\n    this.startTime = getNow();\n\n    if (this.options.wheel) {\n      this.target = e.target;\n    }\n\n    this.stop();\n\n    var point = e.touches ? e.touches[0] : e;\n\n    this.startX = this.x;\n    this.startY = this.y;\n    this.absStartX = this.x;\n    this.absStartY = this.y;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.trigger('beforeScrollStart');\n  };\n\n  BScroll.prototype._move = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.distX += deltaX;\n    this.distY += deltaY;\n\n    var absDistX = Math.abs(this.distX);\n    var absDistY = Math.abs(this.distY);\n\n    var timestamp = getNow();\n\n    // We need to move at least momentumLimitDistance pixels for the scrolling to initiate\n    if (timestamp - this.endTime > this.options.momentumLimitTime && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance) {\n      return;\n    }\n\n    // If you are scrolling in one direction lock the other\n    if (!this.directionLocked && !this.options.freeScroll) {\n      if (absDistX > absDistY + this.options.directionLockThreshold) {\n        this.directionLocked = 'h'; // lock horizontally\n      } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\n        this.directionLocked = 'v'; // lock vertically\n      } else {\n        this.directionLocked = 'n'; // no lock\n      }\n    }\n\n    if (this.directionLocked === 'h') {\n      if (this.options.eventPassthrough === 'vertical') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'horizontal') {\n        this.initiated = false;\n        return;\n      }\n      deltaY = 0;\n    } else if (this.directionLocked === 'v') {\n      if (this.options.eventPassthrough === 'horizontal') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'vertical') {\n        this.initiated = false;\n        return;\n      }\n      deltaX = 0;\n    }\n\n    deltaX = this.hasHorizontalScroll ? deltaX : 0;\n    deltaY = this.hasVerticalScroll ? deltaY : 0;\n    this.movingDirectionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.movingDirectionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    var newX = this.x + deltaX;\n    var newY = this.y + deltaY;\n\n    var top = false;\n    var bottom = false;\n    var left = false;\n    var right = false;\n    // Slow down or stop if outside of the boundaries\n    var bounce = this.options.bounce;\n    if (bounce !== false) {\n      top = bounce.top === undefined ? true : bounce.top;\n      bottom = bounce.bottom === undefined ? true : bounce.bottom;\n      left = bounce.left === undefined ? true : bounce.left;\n      right = bounce.right === undefined ? true : bounce.right;\n    }\n    if (newX > this.minScrollX || newX < this.maxScrollX) {\n      if (newX > this.minScrollX && left || newX < this.maxScrollX && right) {\n        newX = this.x + deltaX / 3;\n      } else {\n        newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n      }\n    }\n    if (newY > this.minScrollY || newY < this.maxScrollY) {\n      if (newY > this.minScrollY && top || newY < this.maxScrollY && bottom) {\n        newY = this.y + deltaY / 3;\n      } else {\n        newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n      }\n    }\n\n    if (!this.moved) {\n      this.moved = true;\n      this.trigger('scrollStart');\n    }\n\n    this._translate(newX, newY);\n\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      this.startTime = timestamp;\n      this.startX = this.x;\n      this.startY = this.y;\n\n      if (this.options.probeType === PROBE_DEBOUNCE) {\n        this.trigger('scroll', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n\n    if (this.options.probeType > PROBE_DEBOUNCE) {\n      this.trigger('scroll', {\n        x: this.x,\n        y: this.y\n      });\n    }\n\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n\n    if (pX > document.documentElement.clientWidth - this.options.momentumLimitDistance || pX < this.options.momentumLimitDistance || pY < this.options.momentumLimitDistance || pY > document.documentElement.clientHeight - this.options.momentumLimitDistance) {\n      this._end(e);\n    }\n  };\n\n  BScroll.prototype._end = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n    this.initiated = false;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.trigger('touchEnd', {\n      x: this.x,\n      y: this.y\n    });\n\n    this.isInTransition = false;\n\n    // ensures that the last position is rounded\n    var newX = Math.round(this.x);\n    var newY = Math.round(this.y);\n\n    var deltaX = newX - this.absStartX;\n    var deltaY = newY - this.absStartY;\n    this.directionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.directionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    // if configure pull down refresh, check it first\n    if (this.options.pullDownRefresh && this._checkPullDown()) {\n      return;\n    }\n\n    // check if it is a click operation\n    if (this._checkClick(e)) {\n      this.trigger('scrollCancel');\n      return;\n    }\n\n    // reset if we are outside of the boundaries\n    if (this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      return;\n    }\n\n    this._translate(newX, newY);\n\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    var absDistX = Math.abs(newX - this.startX);\n    var absDistY = Math.abs(newY - this.startY);\n\n    // flick\n    if (this._events.flick && duration < this.options.flickLimitTime && absDistX < this.options.flickLimitDistance && absDistY < this.options.flickLimitDistance) {\n      this.trigger('flick');\n      return;\n    }\n\n    var time = 0;\n    // start momentum animation if needed\n    if (this.options.momentum && duration < this.options.momentumLimitTime && (absDistY > this.options.momentumLimitDistance || absDistX > this.options.momentumLimitDistance)) {\n      var top = false;\n      var bottom = false;\n      var left = false;\n      var right = false;\n      var bounce = this.options.bounce;\n      if (bounce !== false) {\n        top = bounce.top === undefined ? true : bounce.top;\n        bottom = bounce.bottom === undefined ? true : bounce.bottom;\n        left = bounce.left === undefined ? true : bounce.left;\n        right = bounce.right === undefined ? true : bounce.right;\n      }\n      var wrapperWidth = this.directionX === DIRECTION_RIGHT && left || this.directionX === DIRECTION_LEFT && right ? this.wrapperWidth : 0;\n      var wrapperHeight = this.directionY === DIRECTION_DOWN && top || this.directionY === DIRECTION_UP && bottom ? this.wrapperHeight : 0;\n      var momentumX = this.hasHorizontalScroll ? momentum(this.x, this.startX, duration, this.maxScrollX, this.minScrollX, wrapperWidth, this.options) : { destination: newX, duration: 0 };\n      var momentumY = this.hasVerticalScroll ? momentum(this.y, this.startY, duration, this.maxScrollY, this.minScrollY, wrapperHeight, this.options) : { destination: newY, duration: 0 };\n      newX = momentumX.destination;\n      newY = momentumY.destination;\n      time = Math.max(momentumX.duration, momentumY.duration);\n      this.isInTransition = true;\n    } else {\n      if (this.options.wheel) {\n        newY = Math.round(newY / this.itemHeight) * this.itemHeight;\n        time = this.options.wheel.adjustTime || 400;\n      }\n    }\n\n    var easing = ease.swipe;\n    if (this.options.snap) {\n      var snap = this._nearestSnap(newX, newY);\n      this.currentPage = snap;\n      time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);\n      newX = snap.x;\n      newY = snap.y;\n\n      this.directionX = 0;\n      this.directionY = 0;\n      easing = this.options.snap.easing || ease.bounce;\n    }\n\n    if (newX !== this.x || newY !== this.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (newX > this.minScrollX || newX < this.maxScrollX || newY > this.minScrollY || newY < this.maxScrollY) {\n        easing = ease.swipeBounce;\n      }\n      this.scrollTo(newX, newY, time, easing);\n      return;\n    }\n\n    if (this.options.wheel) {\n      this.selectedIndex = Math.round(Math.abs(this.y / this.itemHeight));\n    }\n    this.trigger('scrollEnd', {\n      x: this.x,\n      y: this.y\n    });\n  };\n\n  BScroll.prototype._checkClick = function (e) {\n    // when in the process of pulling down, it should not prevent click\n    var preventClick = this.stopFromTransition && !this.pulling;\n    this.stopFromTransition = false;\n\n    // we scrolled less than 15 pixels\n    if (!this.moved) {\n      if (this.options.wheel) {\n        if (this.target && this.target.className === this.options.wheel.wheelWrapperClass) {\n          var index = Math.abs(Math.round(this.y / this.itemHeight));\n          var _offset = Math.round((this.pointY + offsetToBody(this.wrapper).top - this.wrapperHeight / 2) / this.itemHeight);\n          this.target = this.items[index + _offset];\n        }\n        this.scrollToElement(this.target, this.options.wheel.adjustTime || 400, true, true, ease.swipe);\n        return true;\n      } else {\n        if (!preventClick) {\n          var _dblclick = this.options.dblclick;\n          var dblclickTrigged = false;\n          if (_dblclick && this.lastClickTime) {\n            var _dblclick$delay = _dblclick.delay,\n                delay = _dblclick$delay === undefined ? 300 : _dblclick$delay;\n\n            if (getNow() - this.lastClickTime < delay) {\n              dblclickTrigged = true;\n              dblclick(e);\n            }\n          }\n          if (this.options.tap) {\n            tap(e, this.options.tap);\n          }\n\n          if (this.options.click && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n            click(e);\n          }\n          this.lastClickTime = dblclickTrigged ? null : getNow();\n          return true;\n        }\n        return false;\n      }\n    }\n    return false;\n  };\n\n  BScroll.prototype._resize = function () {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    // fix a scroll problem under Android condition\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(function () {\n      _this.refresh();\n    }, this.options.resizePolling);\n  };\n\n  BScroll.prototype._startProbe = function () {\n    cancelAnimationFrame(this.probeTimer);\n    this.probeTimer = requestAnimationFrame(probe);\n\n    var me = this;\n\n    function probe() {\n      var pos = me.getComputedPosition();\n      me.trigger('scroll', pos);\n      if (!me.isInTransition) {\n        me.trigger('scrollEnd', pos);\n        return;\n      }\n      me.probeTimer = requestAnimationFrame(probe);\n    }\n  };\n\n  BScroll.prototype._transitionTime = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    this.scrollerStyle[style.transitionDuration] = time + 'ms';\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionDuration] = time + 'ms';\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i = 0; _i < this.indicators.length; _i++) {\n        this.indicators[_i].transitionTime(time);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionTimingFunction = function (easing) {\n    this.scrollerStyle[style.transitionTimingFunction] = easing;\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionTimingFunction] = easing;\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i2 = 0; _i2 < this.indicators.length; _i2++) {\n        this.indicators[_i2].transitionTimingFunction(easing);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionEnd = function (e) {\n    if (e.target !== this.scroller || !this.isInTransition) {\n      return;\n    }\n\n    this._transitionTime();\n    var needReset = !this.pulling || this.movingDirectionY === DIRECTION_UP;\n    if (needReset && !this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.isInTransition = false;\n      if (this.options.probeType !== PROBE_REALTIME) {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n  };\n\n  BScroll.prototype._translate = function (x, y, scale) {\n    assert(!isUndef(x) && !isUndef(y), 'Translate x or y is null or undefined.');\n    if (isUndef(scale)) {\n      scale = this.scale;\n    }\n    if (this.options.useTransform) {\n      this.scrollerStyle[style.transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + scale + ')' + this.translateZ;\n    } else {\n      x = Math.round(x);\n      y = Math.round(y);\n      this.scrollerStyle.left = x + 'px';\n      this.scrollerStyle.top = y + 'px';\n    }\n\n    if (this.options.wheel) {\n      var _options$wheel$rotate = this.options.wheel.rotate,\n          rotate = _options$wheel$rotate === undefined ? 25 : _options$wheel$rotate;\n\n      for (var i = 0; i < this.items.length; i++) {\n        var deg = rotate * (y / this.itemHeight + i);\n        this.items[i].style[style.transform] = 'rotateX(' + deg + 'deg)';\n      }\n    }\n\n    this.x = x;\n    this.y = y;\n    this.setScale(scale);\n\n    if (this.indicators) {\n      for (var _i3 = 0; _i3 < this.indicators.length; _i3++) {\n        this.indicators[_i3].updatePosition();\n      }\n    }\n  };\n\n  BScroll.prototype._animate = function (destX, destY, duration, easingFn) {\n    var me = this;\n    var startX = this.x;\n    var startY = this.y;\n    var startScale = this.lastScale;\n    var destScale = this.scale;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n\n    function step() {\n      var now = getNow();\n\n      if (now >= destTime) {\n        me.isAnimating = false;\n        me._translate(destX, destY, destScale);\n\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n\n        if (!me.pulling && !me.resetPosition(me.options.bounceTime)) {\n          me.trigger('scrollEnd', {\n            x: me.x,\n            y: me.y\n          });\n        }\n        return;\n      }\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newX = (destX - startX) * easing + startX;\n      var newY = (destY - startY) * easing + startY;\n      var newScale = (destScale - startScale) * easing + startScale;\n\n      me._translate(newX, newY, newScale);\n\n      if (me.isAnimating) {\n        me.animateTimer = requestAnimationFrame(step);\n      }\n\n      if (me.options.probeType === PROBE_REALTIME) {\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n      }\n    }\n\n    this.isAnimating = true;\n    cancelAnimationFrame(this.animateTimer);\n    step();\n  };\n\n  BScroll.prototype.scrollBy = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n\n    x = this.x + x;\n    y = this.y + y;\n\n    this.scrollTo(x, y, time, easing);\n  };\n\n  BScroll.prototype.scrollTo = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n\n    this.isInTransition = this.options.useTransition && time > 0 && (x !== this.x || y !== this.y);\n\n    if (!time || this.options.useTransition) {\n      this._transitionTimingFunction(easing.style);\n      this._transitionTime(time);\n      this._translate(x, y);\n\n      if (time && this.options.probeType === PROBE_REALTIME) {\n        this._startProbe();\n      }\n\n      if (!time && (x !== this.x || y !== this.y)) {\n        this.trigger('scroll', {\n          x: x,\n          y: y\n        });\n        // force reflow to put everything in position\n        this._reflow = document.body.offsetHeight;\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n          this.trigger('scrollEnd', {\n            x: x,\n            y: y\n          });\n        }\n      }\n\n      if (this.options.wheel) {\n        if (y > this.minScrollY) {\n          this.selectedIndex = 0;\n        } else if (y < this.maxScrollY) {\n          this.selectedIndex = this.items.length - 1;\n        } else {\n          this.selectedIndex = Math.round(Math.abs(y / this.itemHeight));\n        }\n      }\n    } else {\n      this._animate(x, y, time, easing.fn);\n    }\n  };\n\n  BScroll.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    if (!el) {\n      return;\n    }\n    el = el.nodeType ? el : this.scroller.querySelector(el);\n\n    if (this.options.wheel && el.className !== this.options.wheel.wheelItemClass) {\n      return;\n    }\n\n    var pos = offset(el);\n    pos.left -= this.wrapperOffset.left;\n    pos.top -= this.wrapperOffset.top;\n\n    // if offsetX/Y are true we center the element to the screen\n    if (offsetX === true) {\n      offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n    }\n    if (offsetY === true) {\n      offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n    }\n\n    pos.left -= offsetX || 0;\n    pos.top -= offsetY || 0;\n    pos.left = pos.left > this.minScrollX ? this.minScrollX : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n    pos.top = pos.top > this.minScrollY ? this.minScrollY : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\n\n    if (this.options.wheel) {\n      pos.top = Math.round(pos.top / this.itemHeight) * this.itemHeight;\n    }\n\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n\n  BScroll.prototype.resetPosition = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var easeing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ease.bounce;\n\n    var x = this.x;\n    var roundX = Math.round(x);\n    if (!this.hasHorizontalScroll || roundX > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (roundX < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    var y = this.y;\n    var roundY = Math.round(y);\n    if (!this.hasVerticalScroll || roundY > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (roundY < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    if (x === this.x && y === this.y) {\n      return false;\n    }\n\n    this.scrollTo(x, y, time, easeing);\n\n    return true;\n  };\n\n  BScroll.prototype.getComputedPosition = function () {\n    var matrix = window.getComputedStyle(this.scroller, null);\n    var x = void 0;\n    var y = void 0;\n\n    if (this.options.useTransform) {\n      matrix = matrix[style.transform].split(')')[0].split(', ');\n      x = +(matrix[12] || matrix[4]);\n      y = +(matrix[13] || matrix[5]);\n    } else {\n      x = +matrix.left.replace(/[^-\\d.]/g, '');\n      y = +matrix.top.replace(/[^-\\d.]/g, '');\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  BScroll.prototype.stop = function () {\n    if (this.options.useTransition && this.isInTransition) {\n      this.isInTransition = false;\n      cancelAnimationFrame(this.probeTimer);\n      var pos = this.getComputedPosition();\n      this._translate(pos.x, pos.y);\n      if (this.options.wheel) {\n        this.target = this.items[Math.round(-pos.y / this.itemHeight)];\n      } else {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n      this.stopFromTransition = true;\n    } else if (!this.options.useTransition && this.isAnimating) {\n      this.isAnimating = false;\n      cancelAnimationFrame(this.animateTimer);\n      this.trigger('scrollEnd', {\n        x: this.x,\n        y: this.y\n      });\n      this.stopFromTransition = true;\n    }\n  };\n\n  BScroll.prototype.destroy = function () {\n    this.destroyed = true;\n    this.trigger('destroy');\n    if (this.options.useTransition) {\n      cancelAnimationFrame(this.probeTimer);\n    } else {\n      cancelAnimationFrame(this.animateTimer);\n    }\n    this._removeDOMEvents();\n    // remove custom events\n    this._events = {};\n  };\n}\n\nfunction snapMixin(BScroll) {\n  BScroll.prototype._initSnap = function () {\n    var _this = this;\n\n    this.currentPage = {};\n    var snap = this.options.snap;\n\n    if (snap.loop) {\n      var children = this.scroller.children;\n      if (children.length > 1) {\n        prepend(children[children.length - 1].cloneNode(true), this.scroller);\n        this.scroller.appendChild(children[1].cloneNode(true));\n      } else {\n        // Loop does not make any sense if there is only one child.\n        snap.loop = false;\n      }\n    }\n\n    var el = snap.el;\n    if (typeof el === 'string') {\n      el = this.scroller.querySelectorAll(el);\n    }\n\n    this.on('refresh', function () {\n      _this.pages = [];\n\n      if (!_this.wrapperWidth || !_this.wrapperHeight || !_this.scrollerWidth || !_this.scrollerHeight) {\n        return;\n      }\n\n      var stepX = snap.stepX || _this.wrapperWidth;\n      var stepY = snap.stepY || _this.wrapperHeight;\n\n      var x = 0;\n      var y = void 0;\n      var cx = void 0;\n      var cy = void 0;\n      var i = 0;\n      var l = void 0;\n      var m = 0;\n      var n = void 0;\n      var rect = void 0;\n      if (!el) {\n        cx = Math.round(stepX / 2);\n        cy = Math.round(stepY / 2);\n\n        while (x > -_this.scrollerWidth) {\n          _this.pages[i] = [];\n          l = 0;\n          y = 0;\n\n          while (y > -_this.scrollerHeight) {\n            _this.pages[i][l] = {\n              x: Math.max(x, _this.maxScrollX),\n              y: Math.max(y, _this.maxScrollY),\n              width: stepX,\n              height: stepY,\n              cx: x - cx,\n              cy: y - cy\n            };\n\n            y -= stepY;\n            l++;\n          }\n\n          x -= stepX;\n          i++;\n        }\n      } else {\n        l = el.length;\n        n = -1;\n\n        for (; i < l; i++) {\n          rect = getRect(el[i]);\n          if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\n            m = 0;\n            n++;\n          }\n\n          if (!_this.pages[m]) {\n            _this.pages[m] = [];\n          }\n\n          x = Math.max(-rect.left, _this.maxScrollX);\n          y = Math.max(-rect.top, _this.maxScrollY);\n          cx = x - Math.round(rect.width / 2);\n          cy = y - Math.round(rect.height / 2);\n\n          _this.pages[m][n] = {\n            x: x,\n            y: y,\n            width: rect.width,\n            height: rect.height,\n            cx: cx,\n            cy: cy\n          };\n\n          if (x > _this.maxScrollX) {\n            m++;\n          }\n        }\n      }\n\n      _this._checkSnapLoop();\n\n      var initPageX = snap._loopX ? 1 : 0;\n      var initPageY = snap._loopY ? 1 : 0;\n      _this._goToPage(_this.currentPage.pageX || initPageX, _this.currentPage.pageY || initPageY, 0);\n\n      // Update snap threshold if needed.\n      var snapThreshold = snap.threshold;\n      if (snapThreshold % 1 === 0) {\n        _this.snapThresholdX = snapThreshold;\n        _this.snapThresholdY = snapThreshold;\n      } else {\n        _this.snapThresholdX = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].width * snapThreshold);\n        _this.snapThresholdY = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].height * snapThreshold);\n      }\n    });\n\n    this.on('scrollEnd', function () {\n      if (snap.loop) {\n        if (snap._loopX) {\n          if (_this.currentPage.pageX === 0) {\n            _this._goToPage(_this.pages.length - 2, _this.currentPage.pageY, 0);\n          }\n          if (_this.currentPage.pageX === _this.pages.length - 1) {\n            _this._goToPage(1, _this.currentPage.pageY, 0);\n          }\n        } else {\n          if (_this.currentPage.pageY === 0) {\n            _this._goToPage(_this.currentPage.pageX, _this.pages[0].length - 2, 0);\n          }\n          if (_this.currentPage.pageY === _this.pages[0].length - 1) {\n            _this._goToPage(_this.currentPage.pageX, 1, 0);\n          }\n        }\n      }\n    });\n\n    if (snap.listenFlick !== false) {\n      this.on('flick', function () {\n        var time = snap.speed || Math.max(Math.max(Math.min(Math.abs(_this.x - _this.startX), 1000), Math.min(Math.abs(_this.y - _this.startY), 1000)), 300);\n\n        _this._goToPage(_this.currentPage.pageX + _this.directionX, _this.currentPage.pageY + _this.directionY, time);\n      });\n    }\n\n    this.on('destroy', function () {\n      if (snap.loop) {\n        var _children = _this.scroller.children;\n        if (_children.length > 2) {\n          removeChild(_this.scroller, _children[_children.length - 1]);\n          removeChild(_this.scroller, _children[0]);\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._checkSnapLoop = function () {\n    var snap = this.options.snap;\n\n    if (!snap.loop || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (this.pages.length > 1) {\n      snap._loopX = true;\n    }\n    if (this.pages[0] && this.pages[0].length > 1) {\n      snap._loopY = true;\n    }\n    if (snap._loopX && snap._loopY) {\n      warn('Loop does not support two direction at the same time.');\n    }\n  };\n\n  BScroll.prototype._nearestSnap = function (x, y) {\n    if (!this.pages.length) {\n      return { x: 0, y: 0, pageX: 0, pageY: 0 };\n    }\n\n    var i = 0;\n    // Check if we exceeded the snap threshold\n    if (Math.abs(x - this.absStartX) <= this.snapThresholdX && Math.abs(y - this.absStartY) <= this.snapThresholdY) {\n      return this.currentPage;\n    }\n\n    if (x > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (x < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    if (y > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (y < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    var l = this.pages.length;\n    for (; i < l; i++) {\n      if (x >= this.pages[i][0].cx) {\n        x = this.pages[i][0].x;\n        break;\n      }\n    }\n\n    l = this.pages[i].length;\n\n    var m = 0;\n    for (; m < l; m++) {\n      if (y >= this.pages[0][m].cy) {\n        y = this.pages[0][m].y;\n        break;\n      }\n    }\n\n    if (i === this.currentPage.pageX) {\n      i += this.directionX;\n\n      if (i < 0) {\n        i = 0;\n      } else if (i >= this.pages.length) {\n        i = this.pages.length - 1;\n      }\n\n      x = this.pages[i][0].x;\n    }\n\n    if (m === this.currentPage.pageY) {\n      m += this.directionY;\n\n      if (m < 0) {\n        m = 0;\n      } else if (m >= this.pages[0].length) {\n        m = this.pages[0].length - 1;\n      }\n\n      y = this.pages[0][m].y;\n    }\n\n    return {\n      x: x,\n      y: y,\n      pageX: i,\n      pageY: m\n    };\n  };\n\n  BScroll.prototype._goToPage = function (x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var time = arguments[2];\n    var easing = arguments[3];\n\n    var snap = this.options.snap;\n\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    easing = easing || snap.easing || ease.bounce;\n\n    if (x >= this.pages.length) {\n      x = this.pages.length - 1;\n    } else if (x < 0) {\n      x = 0;\n    }\n\n    if (!this.pages[x]) {\n      return;\n    }\n\n    if (y >= this.pages[x].length) {\n      y = this.pages[x].length - 1;\n    } else if (y < 0) {\n      y = 0;\n    }\n\n    var posX = this.pages[x][y].x;\n    var posY = this.pages[x][y].y;\n\n    time = time === undefined ? snap.speed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;\n\n    this.currentPage = {\n      x: posX,\n      y: posY,\n      pageX: x,\n      pageY: y\n    };\n    this.scrollTo(posX, posY, time, easing);\n  };\n\n  BScroll.prototype.goToPage = function (x, y, time, easing) {\n    var snap = this.options.snap;\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (snap.loop) {\n      var len = void 0;\n      if (snap._loopX) {\n        len = this.pages.length - 2;\n        if (x >= len) {\n          x = len - 1;\n        } else if (x < 0) {\n          x = 0;\n        }\n        x += 1;\n      } else {\n        len = this.pages[0].length - 2;\n        if (y >= len) {\n          y = len - 1;\n        } else if (y < 0) {\n          y = 0;\n        }\n        y += 1;\n      }\n    }\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.next = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x++;\n    if (x >= this.pages.length && this.hasVerticalScroll) {\n      x = 0;\n      y++;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.prev = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x--;\n    if (x < 0 && this.hasVerticalScroll) {\n      x = 0;\n      y--;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.getCurrentPage = function () {\n    var snap = this.options.snap;\n    if (!snap) {\n      return null;\n    }\n\n    if (snap.loop) {\n      var currentPage = void 0;\n      if (snap._loopX) {\n        currentPage = extend({}, this.currentPage, {\n          pageX: this.currentPage.pageX - 1\n        });\n      } else {\n        currentPage = extend({}, this.currentPage, {\n          pageY: this.currentPage.pageY - 1\n        });\n      }\n      return currentPage;\n    }\n    return this.currentPage;\n  };\n}\n\nfunction wheelMixin(BScroll) {\n  BScroll.prototype.wheelTo = function () {\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (this.options.wheel) {\n      this.y = -index * this.itemHeight;\n      this.scrollTo(0, this.y);\n    }\n  };\n\n  BScroll.prototype.getSelectedIndex = function () {\n    return this.options.wheel && this.selectedIndex;\n  };\n\n  BScroll.prototype._initWheel = function () {\n    var wheel = this.options.wheel;\n    if (!wheel.wheelWrapperClass) {\n      wheel.wheelWrapperClass = 'wheel-scroll';\n    }\n    if (!wheel.wheelItemClass) {\n      wheel.wheelItemClass = 'wheel-item';\n    }\n    if (wheel.selectedIndex === undefined) {\n      wheel.selectedIndex = 0;\n      warn('wheel option selectedIndex is required!');\n    }\n  };\n}\n\nvar INDICATOR_MIN_LEN = 8;\n\nfunction scrollbarMixin(BScroll) {\n  BScroll.prototype._initScrollbar = function () {\n    var _this = this;\n\n    var _options$scrollbar = this.options.scrollbar,\n        _options$scrollbar$fa = _options$scrollbar.fade,\n        fade = _options$scrollbar$fa === undefined ? true : _options$scrollbar$fa,\n        _options$scrollbar$in = _options$scrollbar.interactive,\n        interactive = _options$scrollbar$in === undefined ? false : _options$scrollbar$in;\n\n    this.indicators = [];\n    var indicator = void 0;\n\n    if (this.options.scrollX) {\n      indicator = {\n        el: createScrollbar('horizontal'),\n        direction: 'horizontal',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    if (this.options.scrollY) {\n      indicator = {\n        el: createScrollbar('vertical'),\n        direction: 'vertical',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    this.on('refresh', function () {\n      for (var i = 0; i < _this.indicators.length; i++) {\n        _this.indicators[i].refresh();\n      }\n    });\n\n    if (fade) {\n      this.on('scrollEnd', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollCancel', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true);\n        }\n      });\n\n      this.on('beforeScrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true, true);\n        }\n      });\n    }\n\n    this.on('destroy', function () {\n      _this._removeScrollBars();\n    });\n  };\n\n  BScroll.prototype._insertScrollBar = function (scrollbar) {\n    this.wrapper.appendChild(scrollbar);\n  };\n\n  BScroll.prototype._removeScrollBars = function () {\n    for (var i = 0; i < this.indicators.length; i++) {\n      this.indicators[i].destroy();\n    }\n  };\n}\n\nfunction createScrollbar(direction) {\n  var scrollbar = document.createElement('div');\n  var indicator = document.createElement('div');\n\n  scrollbar.style.cssText = 'position:absolute;z-index:9999;pointerEvents:none';\n  indicator.style.cssText = 'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\n\n  indicator.className = 'bscroll-indicator';\n\n  if (direction === 'horizontal') {\n    scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n    indicator.style.height = '100%';\n    scrollbar.className = 'bscroll-horizontal-scrollbar';\n  } else {\n    scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n    indicator.style.width = '100%';\n    scrollbar.className = 'bscroll-vertical-scrollbar';\n  }\n\n  scrollbar.style.cssText += ';overflow:hidden';\n  scrollbar.appendChild(indicator);\n\n  return scrollbar;\n}\n\nfunction Indicator(scroller, options) {\n  this.wrapper = options.el;\n  this.wrapperStyle = this.wrapper.style;\n  this.indicator = this.wrapper.children[0];\n  this.indicatorStyle = this.indicator.style;\n  this.scroller = scroller;\n  this.direction = options.direction;\n  if (options.fade) {\n    this.visible = 0;\n    this.wrapperStyle.opacity = '0';\n  } else {\n    this.visible = 1;\n  }\n\n  this.sizeRatioX = 1;\n  this.sizeRatioY = 1;\n  this.maxPosX = 0;\n  this.maxPosY = 0;\n  this.x = 0;\n  this.y = 0;\n\n  if (options.interactive) {\n    this._addDOMEvents();\n  }\n}\n\nIndicator.prototype.handleEvent = function (e) {\n  switch (e.type) {\n    case 'touchstart':\n    case 'mousedown':\n      this._start(e);\n      break;\n    case 'touchmove':\n    case 'mousemove':\n      this._move(e);\n      break;\n    case 'touchend':\n    case 'mouseup':\n    case 'touchcancel':\n    case 'mousecancel':\n      this._end(e);\n      break;\n  }\n};\n\nIndicator.prototype.refresh = function () {\n  if (this._shouldShow()) {\n    this.transitionTime();\n    this._calculate();\n    this.updatePosition();\n  }\n};\n\nIndicator.prototype.fade = function (visible, hold) {\n  var _this2 = this;\n\n  if (hold && !this.visible) {\n    return;\n  }\n\n  var time = visible ? 250 : 500;\n\n  visible = visible ? '1' : '0';\n\n  this.wrapperStyle[style.transitionDuration] = time + 'ms';\n\n  clearTimeout(this.fadeTimeout);\n  this.fadeTimeout = setTimeout(function () {\n    _this2.wrapperStyle.opacity = visible;\n    _this2.visible = +visible;\n  }, 0);\n};\n\nIndicator.prototype.updatePosition = function () {\n  if (this.direction === 'vertical') {\n    var y = Math.round(this.sizeRatioY * this.scroller.y);\n\n    if (y < 0) {\n      this.transitionTime(500);\n      var height = Math.max(this.indicatorHeight + y * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = height + 'px';\n      y = 0;\n    } else if (y > this.maxPosY) {\n      this.transitionTime(500);\n      var _height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = _height + 'px';\n      y = this.maxPosY + this.indicatorHeight - _height;\n    } else {\n      this.indicatorStyle.height = this.indicatorHeight + 'px';\n    }\n    this.y = y;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateY(' + y + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.top = y + 'px';\n    }\n  } else {\n    var x = Math.round(this.sizeRatioX * this.scroller.x);\n\n    if (x < 0) {\n      this.transitionTime(500);\n      var width = Math.max(this.indicatorWidth + x * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = width + 'px';\n      x = 0;\n    } else if (x > this.maxPosX) {\n      this.transitionTime(500);\n      var _width = Math.max(this.indicatorWidth - (x - this.maxPosX) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = _width + 'px';\n      x = this.maxPosX + this.indicatorWidth - _width;\n    } else {\n      this.indicatorStyle.width = this.indicatorWidth + 'px';\n    }\n\n    this.x = x;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateX(' + x + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.left = x + 'px';\n    }\n  }\n};\n\nIndicator.prototype.transitionTime = function () {\n  var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  this.indicatorStyle[style.transitionDuration] = time + 'ms';\n};\n\nIndicator.prototype.transitionTimingFunction = function (easing) {\n  this.indicatorStyle[style.transitionTimingFunction] = easing;\n};\n\nIndicator.prototype.destroy = function () {\n  this._removeDOMEvents();\n  this.wrapper.parentNode.removeChild(this.wrapper);\n};\n\nIndicator.prototype._start = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this.transitionTime();\n\n  this.initiated = true;\n  this.moved = false;\n  this.lastPointX = point.pageX;\n  this.lastPointY = point.pageY;\n\n  this.startTime = getNow();\n\n  this._handleMoveEvents(addEvent);\n  this.scroller.trigger('beforeScrollStart');\n};\n\nIndicator.prototype._move = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  if (!this.moved) {\n    this.scroller.trigger('scrollStart');\n  }\n\n  this.moved = true;\n\n  var deltaX = point.pageX - this.lastPointX;\n  this.lastPointX = point.pageX;\n\n  var deltaY = point.pageY - this.lastPointY;\n  this.lastPointY = point.pageY;\n\n  var newX = this.x + deltaX;\n  var newY = this.y + deltaY;\n\n  this._pos(newX, newY);\n};\n\nIndicator.prototype._end = function (e) {\n  if (!this.initiated) {\n    return;\n  }\n  this.initiated = false;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this._handleMoveEvents(removeEvent);\n\n  var snapOption = this.scroller.options.snap;\n  if (snapOption) {\n    var speed = snapOption.speed,\n        _snapOption$easing = snapOption.easing,\n        easing = _snapOption$easing === undefined ? ease.bounce : _snapOption$easing;\n\n    var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n    var time = speed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);\n\n    if (this.scroller.x !== snap.x || this.scroller.y !== snap.y) {\n      this.scroller.directionX = 0;\n      this.scroller.directionY = 0;\n      this.scroller.currentPage = snap;\n      this.scroller.scrollTo(snap.x, snap.y, time, easing);\n    }\n  }\n\n  if (this.moved) {\n    this.scroller.trigger('scrollEnd', {\n      x: this.scroller.x,\n      y: this.scroller.y\n    });\n  }\n};\n\nIndicator.prototype._pos = function (x, y) {\n  if (x < 0) {\n    x = 0;\n  } else if (x > this.maxPosX) {\n    x = this.maxPosX;\n  }\n\n  if (y < 0) {\n    y = 0;\n  } else if (y > this.maxPosY) {\n    y = this.maxPosY;\n  }\n\n  x = Math.round(x / this.sizeRatioX);\n  y = Math.round(y / this.sizeRatioY);\n\n  this.scroller.scrollTo(x, y);\n  this.scroller.trigger('scroll', {\n    x: this.scroller.x,\n    y: this.scroller.y\n  });\n};\n\nIndicator.prototype._shouldShow = function () {\n  if (this.direction === 'vertical' && this.scroller.hasVerticalScroll || this.direction === 'horizontal' && this.scroller.hasHorizontalScroll) {\n    this.wrapper.style.display = '';\n    return true;\n  }\n  this.wrapper.style.display = 'none';\n  return false;\n};\n\nIndicator.prototype._calculate = function () {\n  if (this.direction === 'vertical') {\n    var wrapperHeight = this.wrapper.clientHeight;\n    this.indicatorHeight = Math.max(Math.round(wrapperHeight * wrapperHeight / (this.scroller.scrollerHeight || wrapperHeight || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.height = this.indicatorHeight + 'px';\n\n    this.maxPosY = wrapperHeight - this.indicatorHeight;\n\n    this.sizeRatioY = this.maxPosY / this.scroller.maxScrollY;\n  } else {\n    var wrapperWidth = this.wrapper.clientWidth;\n    this.indicatorWidth = Math.max(Math.round(wrapperWidth * wrapperWidth / (this.scroller.scrollerWidth || wrapperWidth || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.width = this.indicatorWidth + 'px';\n\n    this.maxPosX = wrapperWidth - this.indicatorWidth;\n\n    this.sizeRatioX = this.maxPosX / this.scroller.maxScrollX;\n  }\n};\n\nIndicator.prototype._addDOMEvents = function () {\n  var eventOperation = addEvent;\n  this._handleDOMEvents(eventOperation);\n};\n\nIndicator.prototype._removeDOMEvents = function () {\n  var eventOperation = removeEvent;\n  this._handleDOMEvents(eventOperation);\n  this._handleMoveEvents(eventOperation);\n};\n\nIndicator.prototype._handleMoveEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(window, 'touchmove', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(window, 'mousemove', this);\n  }\n};\n\nIndicator.prototype._handleDOMEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(this.indicator, 'touchstart', this);\n    eventOperation(window, 'touchend', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(this.indicator, 'mousedown', this);\n    eventOperation(window, 'mouseup', this);\n  }\n};\n\nfunction pullDownMixin(BScroll) {\n  BScroll.prototype._initPullDown = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n  };\n\n  BScroll.prototype._checkPullDown = function () {\n    var _options$pullDownRefr = this.options.pullDownRefresh,\n        _options$pullDownRefr2 = _options$pullDownRefr.threshold,\n        threshold = _options$pullDownRefr2 === undefined ? 90 : _options$pullDownRefr2,\n        _options$pullDownRefr3 = _options$pullDownRefr.stop,\n        stop = _options$pullDownRefr3 === undefined ? 40 : _options$pullDownRefr3;\n\n    // check if a real pull down action\n\n    if (this.directionY !== DIRECTION_DOWN || this.y < threshold) {\n      return false;\n    }\n\n    if (!this.pulling) {\n      this.pulling = true;\n      this.trigger('pullingDown');\n    }\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n\n    return this.pulling;\n  };\n\n  BScroll.prototype.finishPullDown = function () {\n    this.pulling = false;\n    this.resetPosition(this.options.bounceTime, ease.bounce);\n  };\n\n  BScroll.prototype.openPullDown = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullDownRefresh = config;\n    this._initPullDown();\n  };\n\n  BScroll.prototype.closePullDown = function () {\n    this.options.pullDownRefresh = false;\n  };\n}\n\nfunction pullUpMixin(BScroll) {\n  BScroll.prototype._initPullUp = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n\n    this.pullupWatching = false;\n    this._watchPullUp();\n  };\n\n  BScroll.prototype._watchPullUp = function () {\n    if (this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = true;\n    this.on('scroll', this._checkToEnd);\n  };\n\n  BScroll.prototype._checkToEnd = function (pos) {\n    var _this = this;\n\n    var _options$pullUpLoad$t = this.options.pullUpLoad.threshold,\n        threshold = _options$pullUpLoad$t === undefined ? 0 : _options$pullUpLoad$t;\n\n    if (this.movingDirectionY === DIRECTION_UP && pos.y <= this.maxScrollY + threshold) {\n      // reset pullupWatching status after scroll end.\n      this.once('scrollEnd', function () {\n        _this.pullupWatching = false;\n      });\n      this.trigger('pullingUp');\n      this.off('scroll', this._checkToEnd);\n    }\n  };\n\n  BScroll.prototype.finishPullUp = function () {\n    var _this2 = this;\n\n    if (this.pullupWatching) {\n      this.once('scrollEnd', function () {\n        _this2._watchPullUp();\n      });\n    } else {\n      this._watchPullUp();\n    }\n  };\n\n  BScroll.prototype.openPullUp = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullUpLoad = config;\n    this._initPullUp();\n  };\n\n  BScroll.prototype.closePullUp = function () {\n    this.options.pullUpLoad = false;\n    if (!this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = false;\n    this.off('scroll', this._checkToEnd);\n  };\n}\n\nfunction mouseWheelMixin(BScroll) {\n  BScroll.prototype._initMouseWheel = function () {\n    var _this = this;\n\n    this._handleMouseWheelEvent(addEvent);\n\n    this.on('destroy', function () {\n      clearTimeout(_this.mouseWheelTimer);\n      _this._handleMouseWheelEvent(removeEvent);\n    });\n\n    this.firstWheelOpreation = true;\n  };\n\n  BScroll.prototype._handleMouseWheelEvent = function (eventOperation) {\n    eventOperation(this.wrapper, 'wheel', this);\n    eventOperation(this.wrapper, 'mousewheel', this);\n    eventOperation(this.wrapper, 'DOMMouseScroll', this);\n  };\n\n  BScroll.prototype._onMouseWheel = function (e) {\n    var _this2 = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    e.preventDefault();\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    if (this.firstWheelOpreation) {\n      this.trigger('scrollStart');\n    }\n    this.firstWheelOpreation = false;\n\n    var _options$mouseWheel = this.options.mouseWheel,\n        _options$mouseWheel$s = _options$mouseWheel.speed,\n        speed = _options$mouseWheel$s === undefined ? 20 : _options$mouseWheel$s,\n        _options$mouseWheel$i = _options$mouseWheel.invert,\n        invert = _options$mouseWheel$i === undefined ? false : _options$mouseWheel$i,\n        _options$mouseWheel$e = _options$mouseWheel.easeTime,\n        easeTime = _options$mouseWheel$e === undefined ? 300 : _options$mouseWheel$e;\n\n\n    clearTimeout(this.mouseWheelTimer);\n    this.mouseWheelTimer = setTimeout(function () {\n      if (!_this2.options.snap && !easeTime) {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }\n      _this2.firstWheelOpreation = true;\n    }, 400);\n\n    var wheelDeltaX = void 0;\n    var wheelDeltaY = void 0;\n\n    switch (true) {\n      case 'deltaX' in e:\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * speed;\n          wheelDeltaY = -e.deltaY * speed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n        break;\n      case 'wheelDeltaX' in e:\n        wheelDeltaX = e.wheelDeltaX / 120 * speed;\n        wheelDeltaY = e.wheelDeltaY / 120 * speed;\n        break;\n      case 'wheelDelta' in e:\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * speed;\n        break;\n      case 'detail' in e:\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * speed;\n        break;\n      default:\n        return;\n    }\n\n    var direction = invert ? -1 : 1;\n    wheelDeltaX *= direction;\n    wheelDeltaY *= direction;\n\n    if (!this.hasVerticalScroll) {\n      wheelDeltaX = wheelDeltaY;\n      wheelDeltaY = 0;\n    }\n\n    var newX = void 0;\n    var newY = void 0;\n    if (this.options.snap) {\n      newX = this.currentPage.pageX;\n      newY = this.currentPage.pageY;\n\n      if (wheelDeltaX > 0) {\n        newX--;\n      } else if (wheelDeltaX < 0) {\n        newX++;\n      }\n\n      if (wheelDeltaY > 0) {\n        newY--;\n      } else if (wheelDeltaY < 0) {\n        newY++;\n      }\n\n      this._goToPage(newX, newY);\n      return;\n    }\n\n    newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n    newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n    this.movingDirectionX = this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n    this.movingDirectionY = this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    this.scrollTo(newX, newY, easeTime, ease.swipe);\n    this.trigger('scroll', {\n      x: this.x,\n      y: this.y\n    });\n  };\n}\n\nfunction zoomMixin(BScroll) {\n  BScroll.prototype._initZoom = function () {\n    var _options$zoom = this.options.zoom,\n        _options$zoom$start = _options$zoom.start,\n        start = _options$zoom$start === undefined ? 1 : _options$zoom$start,\n        _options$zoom$min = _options$zoom.min,\n        min = _options$zoom$min === undefined ? 1 : _options$zoom$min,\n        _options$zoom$max = _options$zoom.max,\n        max = _options$zoom$max === undefined ? 4 : _options$zoom$max;\n\n    this.scale = Math.min(Math.max(start, min), max);\n    this.setScale(this.scale);\n    this.scrollerStyle[style.transformOrigin] = '0 0';\n  };\n\n  BScroll.prototype._zoomTo = function (scale, originX, originY, startScale) {\n    this.scaled = true;\n\n    var lastScale = scale / (startScale || this.scale);\n    this.setScale(scale);\n\n    this.refresh();\n\n    var newX = Math.round(this.startX - (originX - this.relativeX) * (lastScale - 1));\n    var newY = Math.round(this.startY - (originY - this.relativeY) * (lastScale - 1));\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    if (this.x !== newX || this.y !== newY) {\n      this.scrollTo(newX, newY, this.options.bounceTime);\n    }\n\n    this.scaled = false;\n  };\n\n  BScroll.prototype.zoomTo = function (scale, x, y) {\n    var _offsetToBody = offsetToBody(this.wrapper),\n        left = _offsetToBody.left,\n        top = _offsetToBody.top;\n\n    var originX = x + left - this.x;\n    var originY = y + top - this.y;\n    this._zoomTo(scale, originX, originY);\n  };\n\n  BScroll.prototype._zoomStart = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n\n    this.startDistance = getDistance(deltaX, deltaY);\n    this.startScale = this.scale;\n\n    var _offsetToBody2 = offsetToBody(this.wrapper),\n        left = _offsetToBody2.left,\n        top = _offsetToBody2.top;\n\n    this.originX = Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 + left - this.x;\n    this.originY = Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 + top - this.y;\n\n    this.trigger('zoomStart');\n  };\n\n  BScroll.prototype._zoom = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    var distance = getDistance(deltaX, deltaY);\n    var scale = distance / this.startDistance * this.startScale;\n\n    this.scaled = true;\n\n    var _options$zoom2 = this.options.zoom,\n        _options$zoom2$min = _options$zoom2.min,\n        min = _options$zoom2$min === undefined ? 1 : _options$zoom2$min,\n        _options$zoom2$max = _options$zoom2.max,\n        max = _options$zoom2$max === undefined ? 4 : _options$zoom2$max;\n\n\n    if (scale < min) {\n      scale = 0.5 * min * Math.pow(2.0, scale / min);\n    } else if (scale > max) {\n      scale = 2.0 * max * Math.pow(0.5, max / scale);\n    }\n\n    var lastScale = scale / this.startScale;\n\n    var x = this.startX - (this.originX - this.relativeX) * (lastScale - 1);\n    var y = this.startY - (this.originY - this.relativeY) * (lastScale - 1);\n\n    this.setScale(scale);\n\n    this.scrollTo(x, y, 0);\n  };\n\n  BScroll.prototype._zoomEnd = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.isInTransition = false;\n    this.isAnimating = false;\n    this.initiated = 0;\n\n    var _options$zoom3 = this.options.zoom,\n        _options$zoom3$min = _options$zoom3.min,\n        min = _options$zoom3$min === undefined ? 1 : _options$zoom3$min,\n        _options$zoom3$max = _options$zoom3.max,\n        max = _options$zoom3$max === undefined ? 4 : _options$zoom3$max;\n\n\n    var scale = this.scale > max ? max : this.scale < min ? min : this.scale;\n\n    this._zoomTo(scale, this.originX, this.originY, this.startScale);\n\n    this.trigger('zoomEnd');\n  };\n}\n\n// import { ease } from '../util/ease'\n\n// Number of items to instantiate beyond current view in the scroll direction.\nvar RUNWAY_ITEMS = 30;\n\n// Number of items to instantiate beyond current view in the opposite direction.\nvar RUNWAY_ITEMS_OPPOSITE = 10;\n\n// The animation interval (in ms) for fading in content from tombstones.\nvar ANIMATION_DURATION_MS = 200;\n\n// The number of pixels of default additional length to allow scrolling to.\nvar DEFAULT_SCROLL_RUNWAY = 2000;\n\nfunction infiniteMixin(BScroll) {\n  BScroll.prototype._initInfinite = function () {\n    this.options.probeType = 3;\n    this.maxScrollY = -DEFAULT_SCROLL_RUNWAY;\n    this.infiniteScroller = new InfiniteScroller(this, this.options.infinity);\n  };\n}\n\nfunction isTombstoneNode(node) {\n  if (node && node.classList) {\n    return node.classList.contains('tombstone');\n  }\n}\n\nfunction InfiniteScroller(scroller, options) {\n  var _this = this;\n\n  this.options = options;\n  assert(typeof this.options.createTombstone === 'function', 'Infinite scroll need createTombstone Function to create tombstone');\n\n  assert(typeof this.options.fetch === 'function', 'Infinite scroll need fetch Function to fetch new data.');\n\n  assert(typeof this.options.render === 'function', 'Infinite scroll need render Function to render each item.');\n\n  this.firstAttachedItem = 0;\n  this.lastAttachedItem = 0;\n\n  this.anchorScrollTop = 0;\n  this.anchorItem = {\n    index: 0,\n    offset: 0\n  };\n  this.tombstoneHeight = 0;\n  this.tombstoneWidth = 0;\n  this.tombstones = [];\n\n  this.items = [];\n  this.loadedItems = 0;\n  this.requestInProgress = false;\n  this.hasMore = true;\n\n  this.scroller = scroller;\n  this.wrapperEl = this.scroller.wrapper;\n  this.scrollerEl = this.scroller.scroller;\n  this.scroller.on('scroll', function () {\n    _this.onScroll();\n  });\n  this.scroller.on('resize', function () {\n    _this.onResize();\n  });\n\n  this.onResize();\n}\n\nInfiniteScroller.prototype.onScroll = function () {\n  var scrollTop = -this.scroller.y;\n  var delta = scrollTop - this.anchorScrollTop;\n  if (scrollTop === 0) {\n    this.anchorItem = {\n      index: 0,\n      offset: 0\n    };\n  } else {\n    this.anchorItem = this._calculateAnchoredItem(this.anchorItem, delta);\n  }\n\n  this.anchorScrollTop = scrollTop;\n  var lastScreenItem = this._calculateAnchoredItem(this.anchorItem, this.wrapperEl.offsetHeight);\n\n  var start = this.anchorItem.index;\n  var end = lastScreenItem.index;\n  if (delta < 0) {\n    start -= RUNWAY_ITEMS;\n    end += RUNWAY_ITEMS_OPPOSITE;\n  } else {\n    start -= RUNWAY_ITEMS_OPPOSITE;\n    end += RUNWAY_ITEMS;\n  }\n  this.fill(start, end);\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.onResize = function () {\n  var tombstone = this.options.createTombstone();\n  tombstone.style.position = 'absolute';\n  this.scrollerEl.appendChild(tombstone);\n  tombstone.style.display = '';\n  this.tombstoneHeight = tombstone.offsetHeight;\n  this.tombstoneWidth = tombstone.offsetWidth;\n  this.scrollerEl.removeChild(tombstone);\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.items[i].height = this.items[i].width = 0;\n  }\n\n  this.onScroll();\n};\n\nInfiniteScroller.prototype.fill = function (start, end) {\n  this.firstAttachedItem = Math.max(0, start);\n  if (!this.hasMore) {\n    end = Math.min(end, this.items.length);\n  }\n  this.lastAttachedItem = end;\n  this.attachContent();\n};\n\nInfiniteScroller.prototype.maybeRequestContent = function () {\n  var _this2 = this;\n\n  if (this.requestInProgress || !this.hasMore) {\n    return;\n  }\n  var itemsNeeded = this.lastAttachedItem - this.loadedItems;\n  if (itemsNeeded <= 0) {\n    return;\n  }\n  this.requestInProgress = true;\n  this.options.fetch(itemsNeeded).then(function (items) {\n    if (items) {\n      _this2.addContent(items);\n    } else {\n      _this2.hasMore = false;\n      var tombstoneLen = _this2._removeTombstones();\n      var curPos = 0;\n      if (_this2.anchorItem.index <= _this2.items.length) {\n        curPos = _this2._fixScrollPosition();\n        _this2._setupAnimations({}, curPos);\n        _this2.scroller.resetPosition(_this2.scroller.options.bounceTime);\n      } else {\n        _this2.anchorItem.index -= tombstoneLen;\n        curPos = _this2._fixScrollPosition();\n        _this2._setupAnimations({}, curPos);\n        _this2.scroller.stop();\n        _this2.scroller.resetPosition();\n        _this2.onScroll();\n      }\n    }\n  });\n};\n\nInfiniteScroller.prototype.addContent = function (items) {\n  this.requestInProgress = false;\n  for (var i = 0; i < items.length; i++) {\n    if (this.items.length <= this.loadedItems) {\n      this._addItem();\n    }\n    this.items[this.loadedItems++].data = items[i];\n  }\n  this.attachContent();\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.attachContent = function () {\n  var unusedNodes = this._collectUnusedNodes();\n  var tombstoneAnimations = this._createDOMNodes(unusedNodes);\n  this._cleanupUnusedNodes(unusedNodes);\n  this._cacheNodeSize();\n  var curPos = this._fixScrollPosition();\n  this._setupAnimations(tombstoneAnimations, curPos);\n};\n\nInfiniteScroller.prototype._removeTombstones = function () {\n  var markIndex = void 0;\n  var tombstoneLen = 0;\n  var itemLen = this.items.length;\n  for (var i = 0; i < itemLen; i++) {\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if ((!currentNode || isTombstoneNode(currentNode)) && !currentData) {\n      if (!markIndex) {\n        markIndex = i;\n      }\n      if (currentNode) {\n        this.scrollerEl.removeChild(currentNode);\n      }\n    }\n  }\n  tombstoneLen = itemLen - markIndex;\n  this.items.splice(markIndex);\n  this.lastAttachedItem = Math.min(this.lastAttachedItem, this.items.length);\n  return tombstoneLen;\n};\n\nInfiniteScroller.prototype._collectUnusedNodes = function () {\n  var unusedNodes = [];\n  for (var i = 0; i < this.items.length; i++) {\n    // Skip the items which should be visible.\n    if (i === this.firstAttachedItem) {\n      i = this.lastAttachedItem - 1;\n      continue;\n    }\n    var currentNode = this.items[i].node;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode)) {\n        // Cache tombstones for reuse\n        this.tombstones.push(currentNode);\n        this.tombstones[this.tombstones.length - 1].style.display = 'none';\n      } else {\n        unusedNodes.push(currentNode);\n      }\n    }\n    this.items[i].node = null;\n  }\n  return unusedNodes;\n};\n\nInfiniteScroller.prototype._createDOMNodes = function (unusedNodes) {\n  var tombstoneAnimations = {};\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    while (this.items.length <= i) {\n      this._addItem();\n    }\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode) && currentData) {\n        currentNode.style.zIndex = 1;\n        tombstoneAnimations[i] = [currentNode, this.items[i].top - this.anchorScrollTop];\n        this.items[i].node = null;\n      } else {\n        continue;\n      }\n    }\n    var node = currentData ? this.options.render(currentData, unusedNodes.pop()) : this._getTombStone();\n    node.style.position = 'absolute';\n    this.items[i].top = -1;\n    this.scrollerEl.appendChild(node);\n    this.items[i].node = node;\n  }\n  return tombstoneAnimations;\n};\n\nInfiniteScroller.prototype._cleanupUnusedNodes = function (unusedNodes) {\n  while (unusedNodes.length) {\n    this.scrollerEl.removeChild(unusedNodes.pop());\n  }\n};\n\nInfiniteScroller.prototype._cacheNodeSize = function () {\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    // Only cache the height if we have the real contents, not a placeholder.\n    if (this.items[i].data && !this.items[i].height) {\n      this.items[i].height = this.items[i].node.offsetHeight;\n      this.items[i].width = this.items[i].node.offsetWidth;\n    }\n  }\n};\n\nInfiniteScroller.prototype._fixScrollPosition = function () {\n  this.anchorScrollTop = 0;\n  for (var _i = 0; _i < this.anchorItem.index; _i++) {\n    this.anchorScrollTop += this.items[_i].height || this.tombstoneHeight;\n  }\n  this.anchorScrollTop += this.anchorItem.offset;\n\n  // Position all nodes.\n  var curPos = this.anchorScrollTop - this.anchorItem.offset;\n  var i = this.anchorItem.index;\n  while (i > this.firstAttachedItem) {\n    curPos -= this.items[i - 1].height || this.tombstoneHeight;\n    i--;\n  }\n\n  return curPos;\n};\n\nInfiniteScroller.prototype._setupAnimations = function (tombstoneAnimations, curPos) {\n  var _this3 = this;\n\n  for (var i in tombstoneAnimations) {\n    var animation = tombstoneAnimations[i];\n    this.items[i].node.style.transform = 'translateY(' + (this.anchorScrollTop + animation[1]) + 'px) scale(' + this.tombstoneWidth / this.items[i].width + ', ' + this.tombstoneHeight / this.items[i].height + ')';\n    // Call offsetTop on the nodes to be animated to force them to apply current transforms.\n    /* eslint-disable no-unused-expressions */\n    this.items[i].node.offsetTop;\n    animation[0].offsetTop;\n    this.items[i].node.style.transition = 'transform ' + ANIMATION_DURATION_MS + 'ms';\n  }\n\n  for (var _i2 = this.firstAttachedItem; _i2 < this.lastAttachedItem; _i2++) {\n    var _animation = tombstoneAnimations[_i2];\n    if (_animation) {\n      var tombstoneNode = _animation[0];\n      tombstoneNode.style.transition = 'transform ' + ANIMATION_DURATION_MS + 'ms, opacity ' + ANIMATION_DURATION_MS + 'ms';\n      tombstoneNode.style.transform = 'translateY(' + curPos + 'px) scale(' + this.items[_i2].width / this.tombstoneWidth + ', ' + this.items[_i2].height / this.tombstoneHeight + ')';\n      tombstoneNode.style.opacity = 0;\n    }\n    if (curPos !== this.items[_i2].top) {\n      if (!_animation) {\n        this.items[_i2].node.style.transition = '';\n      }\n      this.items[_i2].node.style.transform = 'translateY(' + curPos + 'px)';\n    }\n    this.items[_i2].top = curPos;\n    curPos += this.items[_i2].height || this.tombstoneHeight;\n  }\n\n  this.scroller.maxScrollY = -(curPos - this.wrapperEl.offsetHeight + (this.hasMore ? DEFAULT_SCROLL_RUNWAY : 0));\n\n  setTimeout(function () {\n    for (var _i3 in tombstoneAnimations) {\n      var _animation2 = tombstoneAnimations[_i3];\n      _animation2[0].style.display = 'none';\n      // Tombstone can be recycled now.\n      _this3.tombstones.push(_animation2[0]);\n    }\n  }, ANIMATION_DURATION_MS);\n};\n\nInfiniteScroller.prototype._getTombStone = function () {\n  var tombstone = this.tombstones.pop();\n  if (tombstone) {\n    tombstone.style.display = '';\n    tombstone.style.opacity = 1;\n    tombstone.style.transform = '';\n    tombstone.style.transition = '';\n    return tombstone;\n  }\n  return this.options.createTombstone();\n};\n\nInfiniteScroller.prototype._addItem = function () {\n  this.items.push({\n    data: null,\n    node: null,\n    height: 0,\n    width: 0,\n    top: 0\n  });\n};\n\nInfiniteScroller.prototype._calculateAnchoredItem = function (initialAnchor, delta) {\n  if (delta === 0) {\n    return initialAnchor;\n  }\n  var i = initialAnchor.index;\n  var tombstones = 0;\n\n  delta += initialAnchor.offset;\n  if (delta < 0) {\n    while (delta < 0 && i > 0 && this.items[i - 1].height) {\n      delta += this.items[i - 1].height;\n      i--;\n    }\n    tombstones = Math.max(-i, Math.ceil(Math.min(delta, 0) / this.tombstoneHeight));\n  } else {\n    while (delta > 0 && i < this.items.length && this.items[i].height && this.items[i].height < delta) {\n      delta -= this.items[i].height;\n      i++;\n    }\n    if (i >= this.items.length || !this.items[i].height) {\n      tombstones = Math.floor(Math.max(delta, 0) / this.tombstoneHeight);\n    }\n  }\n  i += tombstones;\n  delta -= tombstones * this.tombstoneHeight;\n\n  return {\n    index: i,\n    offset: delta\n  };\n};\n\nfunction BScroll(el, options) {\n  this.wrapper = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!this.wrapper) {\n    warn('Can not resolve the wrapper DOM.');\n  }\n  this.scroller = this.wrapper.children[0];\n  if (!this.scroller) {\n    warn('The wrapper need at least one child element to be scroller.');\n  }\n  // cache style for better performance\n  this.scrollerStyle = this.scroller.style;\n\n  this._init(el, options);\n}\n\ninitMixin(BScroll);\ncoreMixin(BScroll);\neventMixin(BScroll);\nsnapMixin(BScroll);\nwheelMixin(BScroll);\nscrollbarMixin(BScroll);\npullDownMixin(BScroll);\npullUpMixin(BScroll);\nmouseWheelMixin(BScroll);\nzoomMixin(BScroll);\ninfiniteMixin(BScroll);\n\nBScroll.Version = '1.12.4';\n\nexport default BScroll;\n","import './rem'\nimport './../css/index.css'\nimport './../css/flb.css'\nimport Bscroll from 'better-scroll'\nimport {\n  data\n} from './../json/FeHelper.json'\nconsole.log(data)","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}